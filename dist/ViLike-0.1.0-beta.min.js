"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.ViLike=t()}(void 0,function(){var e={version:"0.1.0"},a={secretKey:"",safeKey:"",table:"vilike",key:"key",visit:"visit",like:"like"};return e.configure=function(e){var t,o;for(t in e)void 0!==(o=e[t])&&e.hasOwnProperty(t)&&(a[t]=o);return this},e.init=function(){Bmob.initialize(a.secretKey,a.safeKey)},e.get=function(t,o){var i=localStorage.getItem(t+"-visit"),n=localStorage.getItem(t+"-like"),r=!1,l=Bmob.Query(a.table);l.equalTo(a.key,"==",t),l.find().then(function(e){0!==e.length?(null!=n&&(r=!0),null===i?(l.set("id",e[0].objectId),l.set(a.visit,e[0][a.visit]+1),l.save().then(function(){localStorage.setItem(t+"-visit",1)}).catch(function(){console.error("Can't read and write data normally.")}),o(e[0][a.visit]+1,e[0][a.like],r)):o(e[0][a.visit],e[0][a.like],r)):(l.set(a.key,t),l.set(a.visit,1),l.set(a.like,0),l.save().then(function(){localStorage.setItem(t+"-visit",1)}).catch(function(){console.error("Can't read and write data normally.")}),o(1))})},e.like=function(t,o){var i=Bmob.Query(a.table);i.equalTo(a.key,"==",t),i.find().then(function(e){1==e.length?(i.set("id",e[0].objectId),i.set(a.like,e[0][a.like]+1),i.save().then(function(){localStorage.setItem(t+"-like",1)}).catch(function(){console.error("Can't  write data normally.")}),o(e[0][a.like]+1)):console.error("Like Number is empty or not unique.")})},e});